webpackJsonp([6],{226:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(238),r=s.n(a);for(var o in a)"default"!==o&&function(t){s.d(e,t,function(){return a[t]})}(o);var i=s(263),n=s(78),l=Object(n.a)(r.a,i.a,i.b,!1,null,null,null);l.options.__file="src\\components\\order\\order.vue",e.default=l.exports},238:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(81),r=function(t){return t&&t.__esModule?t:{default:t}}(a),o=s(80);e.default={components:{VDistpicker:r.default},created:function(){this.getGoodsListData()},computed:{getPayAmount:function(){return this.totalPrice+this.orderInfo.expressMoment}},data:function(){return{goodsList:[],totalCount:0,totalPrice:0,orderInfo:{accept_name:"赵坚强",address:"中粮商务公园3栋1304",mobile:"13812345678",email:"huangwei@itcast.cn",post_code:"518000",area:{province:{code:"440000",value:"广东省"},city:{code:"440300",value:"深圳市"},area:{code:"440306",value:"宝安区"}},payment_id:"6",express_id:"1",expressMoment:20,message:"请快点发货",goodsAmount:0,goodsids:"",cargoodsobj:{}},rules:{accept_name:[{required:!0,message:"请输入收货人姓名",trigger:"blur"}],area:[{required:!0,message:"所属区域不能为空",trigger:"blur"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}],mobile:[{required:!0,validator:function(t,e,s){if(!e)return s(new Error("手机号码不能为空"));/^[1][3,4,5,6,7,8][0-9]{9}$/.test(e)?s():s(new Error("手机号码非法"))},trigger:"blur"}]}}},methods:{onSelected:function(t){this.orderInfo.area=t},expressChange:function(t){switch(t){case"1":this.orderInfo.expressMoment=20;break;case"2":this.orderInfo.expressMoment=10;break;case"3":this.orderInfo.expressMoment=8}},getGoodsListData:function(){var t=this;this.orderInfo.goodsids=this.$route.params.ids;var e="site/validate/order/getgoodslist/"+this.$route.params.ids,s=(0,o.getLocalGoods)(),a={};this.$route.params.ids.split(",").forEach(function(t){a[t]=s[t]}),this.orderInfo.cargoodsobj=a,this.$axios.get(e).then(function(e){var a=0,r=0;e.data.message.forEach(function(t){t.buycount=s[t.id],a+=t.buycount,r+=t.buycount*t.sell_price}),t.totalCount=a,t.totalPrice=r,t.orderInfo.goodsAmount=r,t.goodsList=e.data.message})},goShopCart:function(){this.$router.push({path:"/shopcart"})},goToOrder:function(){var t=this;this.$refs.ruleForm.validate(function(e){if(e){t.$axios.post("site/validate/order/setorder",t.orderInfo).then(function(e){1==e.data.status&&t.$message.error(e.data.message),t.$router.push({path:"/payOrder/"+e.data.message.orderid}),t.$route.params.ids.split(",").forEach(function(e){t.$store.commit("deleteGoodsById",e)})})}else t.$message.warning("请完善信息，再下单！")})}}}},263:function(t,e,s){"use strict";s.d(e,"a",function(){return a}),s.d(e,"b",function(){return r});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._m(0),t._v(" "),s("div",{staticClass:"section"},[s("div",{staticClass:"wrapper"},[s("div",{staticClass:"bg-wrap"},[t._m(1),t._v(" "),s("el-form",{ref:"ruleForm",staticClass:"cart-box demo-ruleForm",attrs:{model:t.orderInfo,"label-width":"150px",rules:t.rules}},[s("h2",{staticClass:"slide-tit"},[s("span",[t._v("1、收货地址")])]),t._v(" "),s("div",{staticClass:"form-box address-info"},[s("el-form-item",{attrs:{label:"收货人姓名:",prop:"accept_name"}},[s("el-input",{staticStyle:{width:"500px"},model:{value:t.orderInfo.accept_name,callback:function(e){t.$set(t.orderInfo,"accept_name",e)},expression:"orderInfo.accept_name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"所属区域:",prop:"area"}},[s("v-distpicker",{attrs:{province:t.orderInfo.area.province.value,city:t.orderInfo.area.city.value,area:t.orderInfo.area.area.value},on:{selected:t.onSelected}})],1),t._v(" "),s("el-form-item",{attrs:{label:"详细地址:",prop:"address"}},[s("el-input",{staticStyle:{width:"500px"},model:{value:t.orderInfo.address,callback:function(e){t.$set(t.orderInfo,"address",e)},expression:"orderInfo.address"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"手机号码:",prop:"mobile"}},[s("el-input",{staticStyle:{width:"500px"},model:{value:t.orderInfo.mobile,callback:function(e){t.$set(t.orderInfo,"mobile",e)},expression:"orderInfo.mobile"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"电子邮箱:"}},[s("el-input",{staticStyle:{width:"250px"},model:{value:t.orderInfo.email,callback:function(e){t.$set(t.orderInfo,"email",e)},expression:"orderInfo.email"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"邮政编码:"}},[s("el-input",{staticStyle:{width:"250px"},model:{value:t.orderInfo.post_code,callback:function(e){t.$set(t.orderInfo,"post_code",e)},expression:"orderInfo.post_code"}})],1)],1),t._v(" "),s("h2",{staticClass:"slide-tit"},[s("span",[t._v("2、支付方式")])]),t._v(" "),s("ul",{staticClass:"item-box clearfix"},[s("li",[s("el-radio",{attrs:{label:"6"},model:{value:t.orderInfo.payment_id,callback:function(e){t.$set(t.orderInfo,"payment_id",e)},expression:"orderInfo.payment_id"}},[t._v("在线支付")]),t._v("\n                            手续费:0.0元\n                        ")],1)]),t._v(" "),s("h2",{staticClass:"slide-tit"},[s("span",[t._v("3、配送方式")])]),t._v(" "),s("ul",{staticClass:"item-box clearfix"},[s("li",[s("el-radio-group",{on:{change:t.expressChange},model:{value:t.orderInfo.express_id,callback:function(e){t.$set(t.orderInfo,"express_id",e)},expression:"orderInfo.express_id"}},[s("el-radio",{attrs:{label:"1"}},[t._v("顺丰快递(20.0元)")]),t._v(" "),s("el-radio",{attrs:{label:"2"}},[t._v("圆通快递(10.0元)")]),t._v(" "),s("el-radio",{attrs:{label:"3"}},[t._v("韵达(8.0元)")])],1)],1)]),t._v(" "),s("h2",{staticClass:"slide-tit"},[s("span",[t._v("4、商品清单")])]),t._v(" "),s("div",{staticClass:"line15"}),t._v(" "),s("table",{staticClass:"cart-table",attrs:{width:"100%",border:"0",align:"center",cellpadding:"8",cellspacing:"0"}},[s("tbody",[s("tr",[s("th",{attrs:{colspan:"2",align:"left"}},[t._v("商品信息")]),t._v(" "),s("th",{attrs:{width:"84",align:"left"}},[t._v("单价")]),t._v(" "),s("th",{attrs:{width:"84",align:"center"}},[t._v("购买数量")]),t._v(" "),s("th",{attrs:{width:"104",align:"left"}},[t._v("金额(元)")])]),t._v(" "),t._l(t.goodsList,function(e){return s("tr",{key:e.id},[s("td",{attrs:{width:"68"}},[s("a",{attrs:{target:"_blank",href:"/goods/show-89.html"}},[s("img",{staticClass:"img",attrs:{src:e.img_url}})])]),t._v(" "),s("td",[s("a",{attrs:{target:"_blank",href:"/goods/show-89.html"}},[t._v(t._s(e.title))])]),t._v(" "),s("td",[s("span",{staticClass:"red"},[t._v("\n                                        ￥"+t._s(e.sell_price)+"\n                                    ")])]),t._v(" "),s("td",{attrs:{align:"center"}},[t._v(t._s(e.buycount))]),t._v(" "),s("td",[s("span",{staticClass:"red"},[t._v("\n                                        ￥"+t._s(e.sell_price*e.buycount)+"\n                                    ")])])])})],2)]),t._v(" "),s("div",{staticClass:"line15"}),t._v(" "),s("h2",{staticClass:"slide-tit"},[s("span",[t._v("5、结算信息")])]),t._v(" "),s("div",{staticClass:"buy-foot clearfix"},[s("div",{staticClass:"left-box"},[s("dl",[s("dt",[t._v("订单备注(100字符以内)")]),t._v(" "),s("dd",[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.orderInfo.message,expression:"orderInfo.message"}],staticClass:"input",staticStyle:{height:"35px"},attrs:{name:"message"},domProps:{value:t.orderInfo.message},on:{input:function(e){e.target.composing||t.$set(t.orderInfo,"message",e.target.value)}}})])])]),t._v(" "),s("div",{staticClass:"right-box"},[s("p",[t._v("\n                                商品\n                                "),s("label",{staticClass:"price"},[t._v(t._s(t.totalCount))]),t._v(" 件     商品金额：￥\n                                "),s("label",{staticClass:"price",attrs:{id:"goodsAmount"}},[t._v(t._s(t.totalPrice))]),t._v(" 元    \n                            ")]),t._v(" "),s("p",[t._v("\n                                运费：￥\n                                "),s("label",{staticClass:"price",attrs:{id:"expressFee"}},[t._v(t._s(t.orderInfo.expressMoment))]),t._v(" 元\n                            ")]),t._v(" "),s("p",{staticClass:"txt-box"},[t._v("\n                                应付总金额：￥\n                                "),s("label",{staticClass:"price",attrs:{id:"totalAmount"}},[t._v(t._s(t.getPayAmount))])]),t._v(" "),s("p",{staticClass:"btn-box"},[s("a",{staticClass:"btn button",on:{click:t.goShopCart}},[t._v("返回购物车")]),t._v(" "),s("a",{staticClass:"btn submit",attrs:{id:"btnSubmit"},on:{click:t.goToOrder}},[t._v("确认提交")])])])])])],1)])])])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section"},[s("div",{staticClass:"location"},[s("span",[t._v("当前位置：")]),t._v(" "),s("a",{attrs:{href:"/index.html"}},[t._v("首页")]),t._v(" >\n            "),s("a",{attrs:{href:"/cart.html"}},[t._v("购物车")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cart-head clearfix"},[s("h2",[s("i",{staticClass:"iconfont icon-cart"}),t._v("我的购物车")]),t._v(" "),s("div",{staticClass:"cart-setp"},[s("ul",[s("li",{staticClass:"first active"},[s("div",{staticClass:"progress"},[s("span",[t._v("1")]),t._v("\n                                    放进购物车\n                                ")])]),t._v(" "),s("li",{staticClass:"active"},[s("div",{staticClass:"progress"},[s("span",[t._v("2")]),t._v("\n                                    填写订单信息\n                                ")])]),t._v(" "),s("li",{staticClass:"last"},[s("div",{staticClass:"progress"},[s("span",[t._v("3")]),t._v("\n                                    支付/确认订单\n                                ")])])])])])}];a._withStripped=!0}});